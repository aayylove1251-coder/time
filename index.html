<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D æ¨¡å‹æ™‚é˜å±•ç¤º</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; }
        #canvas-container { width: 100vw; height: 100vh; }
        .loading {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: white; font-family: sans-serif;
        }
    </style>
</head>
<body>

<div id="canvas-container"></div>
<div id="loading" class="loading">æ¨¡å‹è¼‰å…¥ä¸­...</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

<script>
    let scene, camera, renderer, clockModel;
    let hourHand, minuteHand, secondHand;

    function init() {
        // 1. å ´æ™¯è¨­å®š
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 5);

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // 2. å…‰æº
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

   // è¼‰å…¥æ¨¡å‹
const loader = new THREE.GLTFLoader();
loader.load('2025-11-12-099.glb', function (gltf) {
    clockModel = gltf.scene;
    scene.add(clockModel);
    document.getElementById('loading').style.display = 'none';

    // ğŸ•µï¸ åˆ—å°æ‰€æœ‰ç‰©ä»¶åç¨±ï¼Œæ–¹ä¾¿åµéŒ¯ï¼ˆå¯åœ¨ç€è¦½å™¨ F12 çœ‹åˆ°ï¼‰
    clockModel.traverse((node) => {
        console.log("ç™¼ç¾ç‰©ä»¶åç¨±:", node.name);
        
        // æ ¹æ“šä½ æ¨¡å‹çš„ç‰©ä»¶åç¨±é€²è¡Œæ¯”å° (è«‹æ ¹æ“š Console çœ‹åˆ°çš„åç¨±ä¿®æ”¹é€™è£¡)
        if (node.name.includes("æ™‚é‡")) hourHand = node;
        if (node.name.includes("åˆ†é‡")) minuteHand = node;
        if (node.name.includes("ç§’é‡")) secondHand = node;
    });

    // å¦‚æœæŠ“ä¸åˆ°åç¨±ï¼Œé€™è£¡å¼·è¡ŒæŒ‡å®šï¼ˆå‡è¨­æ˜¯ä½ çš„å ´æ™¯ä¸­ç‰¹å®šé †åºçš„ç‰©ä»¶ï¼‰
    // é€™è£¡éœ€è¦ä½ ç¢ºèªä½ çš„æŒ‡é‡åœ¨ Blender è£¡çš„åç¨±
    if (!secondHand) {
        console.warn("æœªåµæ¸¬åˆ°æŒ‡é‡åç¨±ï¼Œè«‹æ‰‹å‹•æŒ‡å®šåç¨±æˆ–ç´¢å¼•");
    }

    animate();
}, undefined, function (error) {
    console.error('è¼‰å…¥å¤±æ•—ï¼š', error);
});

function animate() {
    requestAnimationFrame(animate);

    const now = new Date();
    const s = now.getSeconds();
    const m = now.getMinutes();
    const h = now.getHours();

    // æ—‹è½‰é‚è¼¯ï¼šè«‹å˜—è©¦ä¿®æ”¹ .rotation.y ç‚º .x æˆ– .zï¼Œç›´åˆ°æ–¹å‘æ­£ç¢º
    // å¤§å¤šæ•¸ Blender åŒ¯å‡ºçš„æ¨¡å‹ï¼Œä¸­å¿ƒæ—‹è½‰è»¸æ˜¯ .y æˆ– .z
    if (secondHand) {
        secondHand.rotation.z = - (s * (Math.PI / 30)); 
    }
    if (minuteHand) {
        minuteHand.rotation.z = - (m * (Math.PI / 30));
    }
    if (hourHand) {
        hourHand.rotation.z = - ((h % 12) * (Math.PI / 6) + m * (Math.PI / 360));
    }

    renderer.render(scene, camera);
}
    });

    init();
</script>
</body>
</html>

